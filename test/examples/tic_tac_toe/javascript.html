<html>
  <head>
    <title>Tic Tac Toe | JavaScript</title>
    <style type="text/css">
      #board {
        border: 1px solid black;
      }
      #board td {
        border: 1px solid black;
        width: 30px;
        height: 30px;
        text-align: center;
        vertical-align: middle;
      }
    </style>
    <script type="text/javascript">
      var board;
      var turn;
      var winner;

      function newGame() {
        board = [[], [], []];
        turn = 0;
        winner = undefined;

        var table = document.getElementById('board');
        for (var r = 0; r < 3; ++r) {
          var tr = table.rows[r];
          for (var c = 0; c < 3; ++c) {
            var td = tr.cells[c];
            var button = document.createElement('input');
            button.type = 'button';
            button.onclick = callPick(td, r, c);
            td.replaceChild(button, td.firstChild);
          }
        }

        updateStatus();
      }

      function callPick(td, row, cell) {
        return function() {
          pick(td, row, cell);
        };
      }

      function pick(td, row, cell) {
        var player= turn % 2 ? 'O' : 'X';
        td.replaceChild(document.createTextNode(player), td.firstChild);
        board[row][cell]= player;

        for (var r= 0; r < 3; ++r) {
          if (board[r][0] && board[r][0] == board[r][1] && board[r][0] == board[r][2])
            winner= board[r][0];
        }
        for (var c= 0; c < 3; ++c) {
          if (board[0][c] && board[0][c] == board[1][c] && board[0][c] == board[2][c])
            winner= board[0][c];
        }
        if (board[0][0] && board[0][0] == board[1][1] && board[0][0] == board[2][2])
          winner= board[0][0];
        if (board[0][2] && board[0][2] == board[1][1] && board[0][2] == board[2][0])
          winner= board[2][0];

        ++turn;
        updateStatus();
      }

      function updateStatus() {
        var status= document.getElementById('status');
        if (winner) {
          status.firstChild.nodeValue= winner + "'s won!";
          removeButtons();
        }
        else if (turn == 9) {
          status.firstChild.nodeValue= "Cat's game.";
        }
        else {
          player= turn % 2 ? 'O' : 'X';
          status.firstChild.nodeValue= player + "'s turn.";
        }

        document.getElementById('newgame').disabled = (turn == 0);
      }

      function removeButtons() {
        var table= document.getElementById('board');
        for (var r= 0; r < 3; ++r) {
          var tr= table.rows[r];
          for (var c= 0; c < 3; ++c) {
            var td= tr.cells[c];
            if (td.firstChild.nodeType == Node.ELEMENT_NODE)
              td.replaceChild(document.createTextNode('\u00a0'), td.firstChild);
          }
        }
      }
    </script>
  </head>
  <body onload="newGame()">
    <h2>Two Player Tic-Tac-Toe</h2>
    <input type="button" id="newgame" value="New Game" onclick="newGame()"/>
    <table id="board">
      <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
      </tr>
    </table>
  <div id="status">&nbsp;</div>
  </body>
</html>
